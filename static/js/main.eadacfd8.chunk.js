(this["webpackJsonpgames-app"]=this["webpackJsonpgames-app"]||[]).push([[0],{69:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var r=t(0),i=t.n(r),n=t(14),o=t.n(n),s=(t(69),function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,114)).then((function(a){var t=a.getCLS,r=a.getFID,i=a.getFCP,n=a.getLCP,o=a.getTTFB;t(e),r(e),i(e),n(e),o(e)}))}),c=t(19),l=t(7),d=t(15),g=(t(60),t(2)),m=t(109),f=t(17),p=t(24),u=t(33),h=t.n(u),b=t(111),j=t(112),x=t(105),v=t(107),y=t(108),O=t(55),w=t.n(O),I=t(110),S=t(106),A=t(57),W=t.n(A),D=t(103),L=Object(D.a)({root:{width:300,height:window.innerHeight,marginTop:20,"@media only screen and (max-width:600px)":{width:"150px"},"@media only screen and (max-width:460px)":{width:"100%",height:"315px"}},searchbar:{background:"#0000000a",borderRadius:12,height:44,margin:10,"&.MuiInputBase-root":{"@media only screen and (max-width:460px)":{width:"100%"}}},favorites:{color:"#535050",textDecoration:"none","& .MuiListItemIcon-root":{minWidth:30}},categories:{color:"#535050",textDecoration:"none","& .MuiListItemIcon-root":{minWidth:30}}}),E=t(56),N=t.n(E);var G=Object(c.a)((function(e){return{games:e.gameInfo.games,categories:e.gameInfo.categories,isLoading:e.gameInfo.is_loading,favorites:e.favorites.gameIds}}))((function(e){var a=L(),t=Object(r.useState)(""),i=Object(f.a)(t,2),n=i[0],o=i[1];return Object(g.jsx)(x.a,{className:a.root,children:Object(g.jsxs)(b.a,{children:[Object(g.jsx)("form",{action:"/search/".concat(n),children:Object(g.jsxs)(j.a,{className:a.searchbar,children:[Object(g.jsx)(I.a,{className:a.input,placeholder:"Search Games",inputProps:{"aria-label":"search games"},value:n,onChange:function(e){return function(e){o(e.target.value)}(e)}}),Object(g.jsx)(S.a,{type:"submit",className:a.iconButton,"aria-label":"search",children:Object(g.jsx)(w.a,{})})]})}),e.categories.map((function(e){return Object(g.jsx)(p.a,{to:"All games"===e.nameKey?"/":"/category/".concat(e.nameKey),className:"".concat(a.categories," "),children:Object(g.jsxs)(j.a,{children:[Object(g.jsx)(v.a,{children:"All games"===e.nameKey&&Object(g.jsx)(N.a,{fontSize:"small",color:"primary"})}),Object(g.jsx)(y.a,{variant:"inherit",children:e.nameKey})]})},h()())})),Object(g.jsx)(p.a,{to:"/favorites",className:a.favorites,children:Object(g.jsxs)(j.a,{children:[Object(g.jsx)(v.a,{children:Object(g.jsx)(W.a,{fontSize:"small",color:"secondary"})}),Object(g.jsxs)(y.a,{variant:"inherit",noWrap:!0,children:["Favorites (",e.favorites.length,")"]})]})})]})})})),T="GAMES_DATA_LOADING",_="SET_GAMES_DATA",F="TOGGLE_FAVORITE",C="SET_FAVORITES",k="SET_FAVORITES_DATA",K="SET_SEARCHED_DATA",z=function(e){return{type:T}};Object(c.a)((function(e){return Object(d.a)({},e)}),(function(e){return{gamesDataLoading:function(){return e(z)},setGamesData:function(a,t){return e(function(e,a){return{type:_,payload:{data:e,category:a}}}(a,t))},setFavorites:function(a){return e(function(e){return{type:C,payload:e}}(a))},setFavoritesData:function(a,t){return e(function(e,a){return{type:k,payload:{data:e,favorites:a}}}(a,t)).favorites},setSearchedData:function(a,t){return e(function(e,a){return{type:K,payload:{data:e,search:a}}}(a,t))}}}))((function(e){var a=Object(l.g)(),t=a.search,i=a.category,n=Object(l.f)();return Object(r.useEffect)((function(a){var t=localStorage.getItem("favorites");t=t?JSON.parse(t):[],e.setFavorites(t)}),[]),Object(r.useEffect)((function(a){localStorage.setItem("favorites",JSON.stringify(e.favorites.gameIds))}),[e.favorites.gameIds]),Object(r.useEffect)((function(){console.log(e.favorites.gameIds);fetch("".concat(window.location.origin,"/gamesList.json"),{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(a){t?e.setSearchedData(a,t):"/favorites"===n.pathname?e.setFavoritesData(a,e.favorites):e.setGamesData(a,i)})).catch((function(e){return console.log(e)}))}),[n.pathname,e.favorites]),Object(g.jsxs)(m.a,{container:!0,children:[Object(g.jsx)(G,{}),e.children]})}));var M,R=t(26),B=Object(D.a)((M={homeContainer:{flex:1,marginLeft:20,marginRight:20,display:"flex",marginTop:20,alignItems:"flex-start",background:"#383838",padding:4,"@media only screen and (max-width:992px)":{flexDirection:"column"}},large:{width:"50%",display:"flex",alignItems:"flex-start",flexWrap:"wrap","@media only screen and (max-width:992px)":{width:"100%"}},singlelarge:{width:"25%"},gameLargeImg:{width:"-webkit-fill-available",display:"block",flexGrow:1,border:"4px solid #383838",boxSizing:"border-box"},small:{width:"50%",display:"flex",alignItems:"flex-start",flexWrap:"wrap","@media only screen and (max-width:992px)":{width:"100%"}},gameSmallImg:{display:"block",flexGrow:1,border:"4px solid #383838",boxSizing:"border-box",width:"-webkit-fill-available"},gameName:{position:"absolute",bottom:5,color:"white",left:6,fontSize:12}},Object(R.a)(M,"singlelarge",{position:"relative"}),Object(R.a)(M,"smallImgWrapper",{position:"relative",maxWidth:"25%",flexGrow:1,"@media only screen and (max-width:992px)":{maxWidth:"unset",minWidth:"25%",flexGrow:1}}),Object(R.a)(M,"largeImgWrapper",{position:"relative",width:"50%"}),Object(R.a)(M,"favoriteIcon",{position:"absolute",top:10,right:10,width:16,opacity:.7,cursor:"pointer","&:hover":{opacity:1}}),M)),J=Object(D.a)({large:{width:"50%",display:"flex",alignItems:"flex-start",flexWrap:"wrap","@media only screen and (max-width:992px)":{width:"100%"}},singlelarge:{width:"25%",position:"relative"},gameLargeImg:{width:"-webkit-fill-available",display:"block",flexGrow:1,border:"4px solid #383838",boxSizing:"border-box"},small:{width:"50%",display:"flex",alignItems:"flex-start",flexWrap:"wrap","@media only screen and (max-width:992px)":{width:"100%"}},gameSmallImg:{display:"block",flexGrow:1,border:"4px solid #383838",boxSizing:"border-box",width:"-webkit-fill-available"},gameName:{position:"absolute",bottom:5,color:"white",left:6,fontSize:12},smallImgWrapper:{position:"relative",maxWidth:"25%",flexGrow:1,"@media only screen and (max-width:992px)":{maxWidth:"unset",minWidth:"25%",flexGrow:1}},largeImgWrapper:{position:"relative",width:"50%"},favoriteIcon:{position:"absolute",top:10,right:10,width:16,opacity:.9,cursor:"pointer","&:hover":{opacity:1}},filteredClass:{minWidth:"25%",position:"relative",flexGrow:1}});var P=Object(c.a)((function(e){return Object(d.a)(Object(d.a)({},e),{},{favorites:e.favorites})}),(function(e){return{toggleFavorite:function(a){return e(function(e){return{type:F,payload:e}}(a))}}}))((function(e){var a=e.wrapperClass,t=e.isLarge,r=e.game,i=J(),n=e.favorites.gameIds;return Object(g.jsxs)("div",{className:a,children:[Object(g.jsx)("img",{className:t?i.gameLargeImg:i.gameSmallImg,alt:r.name,src:"/assets/".concat(t?r.img.large:r.img.small)}),Object(g.jsx)("span",{className:i.gameName,children:r.name}),Object(g.jsx)("img",{className:i.favoriteIcon,src:"/assets/icons/".concat(n.includes(r.id)?"icon-favorites-active.svg":"icon-favorites-noactive.svg"),alt:"favorite",onClick:function(a){return t=r.id,void e.toggleFavorite(t);var t}})]})}));Object(c.a)((function(e){return{games:e.gameInfo.games,categories:e.gameInfo.categories,isLoading:e.gameInfo.is_loading}}))((function(e){var a=B();return Object(g.jsx)("div",{className:a.homeContainer,children:!e.isLoading&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:e.games.large.length>1?a.large:a.singlelarge,children:e.games.large.map((function(t){return Object(g.jsx)(P,{game:t,isLarge:!0,wrapperClass:1===e.games.large.length?a.singlelargeWrapper:a.largeImgWrapper},h()())}))}),Object(g.jsx)("div",{className:a.small,children:e.games.small.map((function(e){return Object(g.jsx)(P,{game:e,isLarge:!1,wrapperClass:a.smallImgWrapper},h()())}))})]})})}));var V=t(36),H=t(58),q={is_loading:!0,games:[],categories:[]},Q=t(59),U={gameIds:[]},X=Object(V.b)({gameInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case T:return Object(d.a)(Object(d.a)({},e),{},{is_loading:!0});case _:var t=a.payload.data,r=a.payload.category?a.payload.category:"All games",i=t.categories.filter((function(e){return e.nameKey===r})),n=Object(f.a)(i,1),o=n[0],s=o.games.map((function(e){var a=t.games.filter((function(a){return a.id===e.id})),r=Object(f.a)(a,1)[0];return r.top=e.top,r})),c=[],l=[];s.forEach((function(e){e.top?c.push(e):l.push(e)}));var g=t.categories.map((function(e){return{id:e.id,nameKey:e.nameKey}}));return{is_loading:!1,games:{small:l,large:c},categories:g,allData:a.payload.data};case k:var m=a.payload.data,p=m.categories.filter((function(e){return"All games"===e.nameKey})),u=Object(f.a)(p,1),h=u[0],b=h.games.map((function(e){var a=m.games.filter((function(a){return a.id===e.id})),t=Object(f.a)(a,1)[0];return t.top=e.top,t}));b=a.payload.favorites.gameIds.map((function(e){var a=m.games.filter((function(a){return a.id===e}));return Object(f.a)(a,1)[0]}));var j=[],x=[];b.forEach((function(e){e.top?j.push(e):x.push(e)}));var v=m.categories.map((function(e){return{id:e.id,nameKey:e.nameKey}}));return{is_loading:!1,games:{small:x,large:j},categories:v,allData:a.payload.data};case K:var y=a.payload.data;console.log(a.payload.searchedGame,30);var O=y.categories.filter((function(e){return"All games"===e.nameKey})),w=Object(f.a)(O,1),I=w[0],S=I.games.map((function(e){var a=y.games.filter((function(a){return a.id===e.id})),t=Object(f.a)(a,1)[0];return t.top=e.top,t}));S=S.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.payload.search.toLowerCase())})),console.log(S,524968484684847);var A=[],W=[];S.forEach((function(e){e.top?A.push(e):W.push(e)}));var D=y.categories.map((function(e){return{id:e.id,nameKey:e.nameKey}}));return{is_loading:!1,games:{small:A,large:W},categories:D,allData:a.payload.data};default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C:return{gameIds:a.payload};case F:var t=a.payload;return{gameIds:e.gameIds.includes(t)?e.gameIds.filter((function(e){return e!==t})):[].concat(Object(Q.a)(e.gameIds),[t])};default:return e}}});Object(V.c)(X,Object(V.a)(H.a));o.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(g.Fragment,{children:"react test"})}),document.getElementById("root")),s()}},[[77,1,2]]]);
//# sourceMappingURL=main.eadacfd8.chunk.js.map